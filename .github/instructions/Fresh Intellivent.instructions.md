---
applyTo: '**'
---
# VS Code Instructions for Fresh Intellivent SKY Homey App

## Purpose

This instruction file is intended for development in Visual Studio Code with AI assistance. It defines how the project should be built, the technical requirements, and how AI tools should generate code for the Homey app controlling Fresh Intellivent SKY fans.

The goal is to create a complete Homey Pro app (SDK v6.0) based on the open-source project *freshintelliventHacs*, with support for reading data, writing data, flows, and notifications.

---

## Technical Environment

* **Node.js version:** 22.x
* **Homey Apps SDK:** 6.0
* **Homey Pro firmware:** 12.8.2
* **Communication:** Bluetooth Low Energy (BLE)
* **Project structure:** Standard Homey app with drivers, device.js, capabilities, and compose files.

All code generated by AI must follow these requirements and always be compatible with SDK 6.

---

## Project Goals

1. **Read data from Fresh Intellivent SKY:**

   * Temperature
   * Humidity
   * Fan speed
   * Status flags (boost, summer mode, etc.)

2. **Write data / control the fan:**

   * Set fan speed
   * Enable/disable features
   * Change thresholds
   * Start/stop the fan

3. **Flow support:**

   * Triggers
   * Conditions
   * Actions

4. **Notifications:**

   * Send Homey notifications on changes
   * System messages

---

## General Code Instructions

All AI tools used in this project **must always follow these rules**:

### 1. Code Style

* Use modern JavaScript (ES2023+).
* Always export classes with `module.exports = …`.
* Use `async/await` for all asynchronous operations.
* Avoid external dependencies unless absolutely necessary.
* Use `Homey.BLE` for Bluetooth communication.

### 2. Files AI Is Allowed to Generate

AI may create and update:

* `app.json`
* `drivers/*/driver.js`
* `drivers/*/device.js`
* `.homeycompose/*`
* BLE communication modules in `/lib`
* Flow actions, conditions, and triggers
* README

### 3. Files AI Is Not Allowed to Generate

* No binaries
* No files containing personal API keys

### 4. Response Format

When AI generates code in VS Code, it must:

* Never remove Homey-specific components
* Never skip error handling
* Always comment important BLE protocol logic
* Always include required imports for SDK v6

---

## Structural Guidelines for the Project

### 1. Base Structure

The project should follow this layout:

```
/fresh-intellivent-sky/
  ├── .homeycompose/
  │     ├── capabilities/
  │     └── drivers/
  ├── drivers/
  │     └── sky/
  │           ├── driver.js
  │           ├── device.js
  │           └── manifest.json
  ├── lib/
  │     └── sky.js
  ├── app.json
  ├── README.md
  └── vscode_instructions.md
```

### 2. Capabilities

AI should generate the following capabilities:

* `measure_temperature`
* `measure_humidity`
* `fan_speed`
* `target_fan_speed`
* `boost`
* `summer_mode`
* Alarm capabilities if needed

### 3. Flows

AI should generate:

* **Flow triggers** (e.g., humidity changed)
* **Flow actions** (e.g., set fan speed)
* **Flow conditions** (e.g., is boost enabled)

### 4. BLE Communication

AI must base communication on the HACS repository:

* Port functions to JavaScript
* Handle byte arrays correctly
* Implement reconnection logic

---

## Instructions for AI Assistants

When the user writes in VS Code with this file loaded, the following applies:

### AI MUST ALWAYS:

* Follow this instruction before generating code
* Ensure compatibility with Homey SDK v6
* Ask questions if BLE protocol details are unclear
* Create modular and testable code

### AI MUST NEVER:

* Generate code for the wrong Node.js or Homey SDK version
* Replace Homey's BLE API with third-party solutions
* Remove critical comments
* Skip capabilities, flows, or BLE functionality

---

## Checklist for AI Before Returning Code

1. Is the code compatible with **Node.js 22**?
2. Does it follow **Homey Apps SDK 6** standards?
3. Are BLE UUIDs correctly included?
4. Is error handling adequate?
5. Are capability names correct?
6. Is all communication asynchronous?
7. Are no unnecessary dependencies added?

Only when all points are met may code be delivered.

---

## Final Notes

This instruction file is the foundation of the entire project. All future files, functions, and code blocks must be created according to these rules. This ensures that the app becomes stable, structured, and fully compatible with Homey Pro and Fresh Intellivent SKY.
